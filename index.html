<html>
    <head>
        <meta charset="utf-8"/>
        <title>Convert Image to ASCii</title>
        <style>
            body {
                font-size: 4.5;
            }
        </style>
    </head>

    <script type="text/javascript">

        function display() {
            let imageCanvas = document.getElementById("tempCanvas");
            let imageContext = imageCanvas.getContext("2d");

            let img = new Image();
            img.src = "img/hans.png"; //document.getElementById("filePath")
            let imageData;
            img.onload = function() {
                imageContext.drawImage(img, 0, 0, 100, 100);
                imageData = imageContext.getImageData(0, 0, 100, 100);
                //img.display.style = "none";


                const asciiSection = document.getElementById("asciiSection");
                let picture = [];

                for(let y=0; y<100; y++) {
                    let line = [];
                    for(let x=0; x<100; x++) {
                        let pixel = imageData.data;
                        let red = pixel[0+4*(x+100*y)];
                        let green = pixel[1+4*(x+100*y)];
                        let blue = pixel[2+4*(x+100*y)];
                        let alpha = pixel[3+4*(x+100*y)];
                        let rgba = 'rgba('+red+','+green+','+blue+','+alpha+')';


                        let num = Math.floor(Math.random()*3);
                        let color = rgba;
                        let string;
                        switch (num) {
                            case 0:
                                //color = "#FF0000";
                                string = "█"; //●█⬤ ❶❷❸❹❺❻❼❽❾❿
                                break;
                            case 1:
                                //color = "#00FF00";
                                string = "█";
                                break;
                            case 2:
                                //color = "#0000FF";
                                string = "█";
                                break;
                        }
                        let char = "<span style='color:" + color + "'>" + string + "</span>";
                        line.unshift(char);
                    }
                     picture.push(line.join("&nbsp")); //
                    picture.push("<br />");
                }

                asciiSection.innerHTML = picture.join("");
            }
        }


        /*
        function setImage() {

        }
        var imgData = img.getImageData(x, y, width, height).data;

        function draw() {
            //var image = document.getElementById("sourceImage");
            for (let yPixel=0; yPixel<image.Width; yPixel++) {
                for (let xPixel=0; xPixel<image.Height; xPixel++) {

                }
            }

        }
        */
    </script>

    <body>
        <canvas id="tempCanvas" width="100px" height="100px"></canvas>
        <div id="asciiSection"></div>

        <script>
            //getImageData();
            //draw();
            display();
        </script>
    </body>
</html>
